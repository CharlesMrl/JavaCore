/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package DataModel;

import MoveController.Position;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;

/**
 *
 * @author Bastien
 */
public class Move extends DataModel
{
    
    public Move(HashMap<String, String> input){
        super(input);
    }
    
    public Move()
    {
        
    }
    
    
    public static Move getById(int id) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
    
    //renvoi le dernier Move de la partie pid
    public static Move getLastFromGame(Game g)
    {
        
        //recuperer (BDD) tous les moves de la partie
        ArrayList<DataModel> liste_move = ConnectionManager.find(Move.class, "pid", g.get("id"));
        
        //chercher le move avec la date la plus recente
        String latest_time = liste_move.get(0).get("time");
        Move m = (Move)liste_move.get(0);
        
        for(DataModel move : liste_move){
            if(move.get("time").compareTo(latest_time)>0){
                latest_time = move.get("time");
                m = (Move)move;
            }
        }
        
        return m;
    }
    
    public boolean isLastFromGame(Game g)
    {
        Move m = Move.getLastFromGame(g);
        if(m.get("id").equals(this.get("id"))) return true;
        else return false;
    }
    
    //renvoie tous les objets ou l'attribut field=value
    public static ArrayList<DataModel> find(String field, Object value)
    {
        ArrayList<DataModel> m;
        m=ConnectionManager.find(Move.class,field,value);
        return m;
    }
    
    //renvoie tous les objets ou l'attribut field=value
    public static Move findById(Object id)
    {
        Move m=(Move)ConnectionManager.findById(Move.class,id);
        return m;
    }
}
