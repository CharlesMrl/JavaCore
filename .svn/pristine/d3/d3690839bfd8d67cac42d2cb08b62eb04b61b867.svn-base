/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package DataModel;

import MoveController.Position;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;

/**
 *
 * @author Bastien
 */
public class Move extends DataModel{
    static String table_name="moves";

    public Move(){
    
    }
    
    public Move(HashMap<String, String> input){
        super(input);
    }
    
    public static Move getById(int id) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    
    public static String getTable() {
        return "moves";
    }
    
    //renvoi le dernier Move de la partie pid
    public static Move getLatestFromGame(Game g)
    {
        
        //recuperer (BDD) tous les moves de la partie
        ArrayList<DataModel> liste_move = ConnectionManager.find(Move.class, "pid", g.get("id"));
        
        //chercher le move avec la date la plus recente
        String latest_time = liste_move.get(0).get("time");
        Move m = (Move)liste_move.get(0);
        
        for(DataModel move : liste_move){
            if(move.get("time").compareTo(latest_time)>0){
                latest_time = move.get("time");
                m = (Move)move;
            }
        }
        
        return m;
    }
    
    public boolean isLatestFromGame(Game g)
    {
        Move m = Move.getLatestFromGame(g);
        if(m.get("id").equals(this.get("id"))) return true;
        else return false;
    }
}
